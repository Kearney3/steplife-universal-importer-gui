# 测试指南 - 一生足迹数据导入器

## 🎯 测试概述

本指南帮助您测试新添加的GUI功能和增强特性。

## 📋 准备工作

### 1. 安装Go环境

访问 [golang.org](https://golang.org/dl/) 下载并安装Go 1.24.2或更高版本。

验证安装：
```bash
go version
```

### 2. 下载项目依赖

```bash
go mod tidy
```

### 3. 构建应用程序

```bash
# Linux/macOS
go build -o main ./cmd

# Windows
go build -o main.exe ./cmd
```

## 🧪 测试步骤

### 测试一：GUI界面启动

1. **启动GUI模式**（默认）：
   ```bash
   ./main        # Linux/macOS
   ./main.exe    # Windows
   ```

2. **验证界面元素**：
   - [ ] 主窗口标题为"一生足迹数据导入器"
   - [ ] 包含文件选择区域
   - [ ] 包含参数设置卡片
   - [ ] 包含处理状态区域
   - [ ] 包含操作按钮

### 测试二：参数配置

1. **时间设置测试**：
   - 设置开始时间：`2024-01-01 08:00:00`
   - 设置结束时间：`2024-01-01 09:00:00`
   - 验证输入验证和格式检查

2. **海拔设置测试**：
   - 设置默认海拔：`200.5` 米
   - 验证数值输入

3. **速度设置测试**：
   - 测试"自动计算"模式
   - 测试"手动指定"模式，设置速度为 `2.0` m/s

4. **插点设置测试**：
   - 启用插点策略
   - 设置插点距离：`50` 米

### 测试三：文件处理测试

1. **选择测试目录**：
   - 源文件目录：选择 `test_data` 文件夹
   - 输出目录：选择 `output` 文件夹

2. **批量处理测试**：
   - 点击"开始处理"
   - 观察进度条和状态信息
   - 验证生成的文件：
     - `sample_track_steplife.csv`
     - `sample_track_steplife.csv`
     - `sample_track_steplife.csv`

### 测试四：配置保存测试

1. **修改配置参数**
2. **点击"保存配置"**
3. **重启程序验证配置是否保存**

### 测试五：命令行模式测试

运行测试脚本：
```bash
chmod +x test_cli.sh
./test_cli.sh
```

验证输出文件是否正确生成。

## 📊 预期结果验证

### CSV文件格式检查

生成的CSV文件应包含以下列：
```csv
dataTime,locType,longitude,latitude,heading,accuracy,speed,distance,isBackForeground,stepType,altitude
```

### 时间分配验证

- 开始时间：2024-01-01 08:00:00
- 结束时间：2024-01-01 09:00:00
- 轨迹点应均匀分布在时间范围内

### 海拔验证

所有轨迹点的海拔应为配置的默认值（200.5米）

### 速度验证

- 自动模式：速度应根据距离计算
- 手动模式：速度应为设置的固定值

## 🐛 常见问题排查

### 问题1：GUI界面无法启动
- 检查Go版本是否为1.24.2+
- 检查Fyne依赖是否正确安装
- Linux下可能需要安装GTK开发库

### 问题2：文件无法识别
- 检查文件扩展名（.kml, .gpx, .ovjsn）
- 验证文件内容格式是否正确

### 问题3：配置无法保存
- 检查程序是否有写入config.ini的权限
- 验证配置文件的语法

### 问题4：时间格式错误
- 确保时间格式为：`yyyy-MM-dd HH:mm:ss`
- 检查日期和时间是否有效

## 🎉 测试完成检查表

- [ ] GUI界面正常启动
- [ ] 参数设置功能正常
- [ ] 文件选择和处理正常
- [ ] 配置保存和加载正常
- [ ] 批量处理功能正常
- [ ] 输出文件格式正确
- [ ] 时间分配准确
- [ ] 海拔高度正确应用
- [ ] 速度计算正确
- [ ] 命令行模式兼容

## 📞 获取帮助

如果遇到问题，请：
1. 检查控制台错误信息
2. 查看日志文件（如果有）
3. 提交Issue到GitHub项目

